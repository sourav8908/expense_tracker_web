{% extends "base.html" %}

{% block content %}
<h2>Edit Expense</h2>

<form method="POST" action="{{ url_for('edit_expense', id=id) }}">
  <div class="mb-3">
    <label for="amount" class="form-label">Amount</label>
    <input type="number" step="0.01" min="0.01" name="amount" id="amount" value="{{ form.amount.data or '' }}" class="form-control" required>
    {% if form.amount.errors %}
      <div class="text-danger">{{ form.amount.errors[0] }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label for="expense_date" class="form-label">Date</label>
    <input type="date" name="expense_date" id="expense_date" value="{{ form.expense_date.data.strftime('%Y-%m-%d') if form.expense_date.data else '' }}" class="form-control" required>
    {% if form.expense_date.errors %}
      <div class="text-danger">{{ form.expense_date.errors[0] }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label for="note" class="form-label">Note</label>
    <input type="text" name="note" id="note" value="{{ form.note.data or '' }}" class="form-control" maxlength="255">
    {% if form.note.errors %}
      <div class="text-danger">{{ form.note.errors[0] }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label for="category" class="form-label">Category</label>
    <select name="category" id="category" class="form-select" required>
      {% for val, label in form.category.choices %}
      <option value="{{ val }}" {% if form.category.data == val %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
    {% if form.category.errors %}
      <div class="text-danger">{{ form.category.errors[0] }}</div>
    {% endif %}
  </div>

  <button type="submit" class="btn btn-primary">Update Expense</button>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
